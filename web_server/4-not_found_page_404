#!/bin/bash

# Create the custom 404 page
cat <<EOL > /usr/share/nginx/html/4-not_found_page_404.html
<!DOCTYPE html>
<html>
<head>
    <title>404 Not Found</title>
</head>
<body>
    <h1>404 Not Found</h1>
    <p>Ceci n'est pas une page</p>
</body>
</html>
EOL

# Configure Nginx
echo "Configuring Nginx..."
cat <<EOL > /etc/nginx/sites-available/default
server {
    # ... other server configuration ...

    error_page 404 /4-not_found_page_404.html;

    location = /4-not_found_page_404.html {
        root /usr/share/nginx/html;
        internal;
    }

    # ... other server configuration ...
}
EOL

# Test and reload Nginx
echo "Testing Nginx configuration..."
if nginx -t; then
    echo "Reloading Nginx..."
    systemctl reload nginx
    echo "Nginx configuration updated successfully."
else
    echo "Nginx configuration test failed. Please check your configuration."
fi
